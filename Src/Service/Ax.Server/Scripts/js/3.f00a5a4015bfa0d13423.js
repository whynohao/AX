webpackJsonp([3],{592:function(n,e,t){t(675),t(676);var a=t(242)(t(618),t(699),"data-v-3fdd0ed6",null);n.exports=a.exports},618:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(149),l=t.n(a),o=t(151);t.n(o);e.default={data:function(){return{dialogParamsVisible:!1,select:"",formdata:{MENUITEM:"",PROGID:"",PROGNAME:"",BILLTYPE:"",ENTRYPARAM:"",ISVISUAL:!1,CONDITION:"",id:""},options:[],paramOptions:[],formInline:{user:"",region:""},selectEntryParam:"",paramInfo:{DisplayText:"",Name:""},billtype:[{value:0,label:"主数据"},{value:1,label:"单据"},{value:2,label:"数据维护功能"},{value:3,label:"自定义功能"},{value:4,label:"报表"},{value:5,label:"日报表"}]}},mounted:function(){this.getSelectField()},methods:{setParam:function(){var n={ParamStore:{}};n.ParamStore[this.paramInfo.Name]=this.selectEntryParam,this.formdata.ENTRYPARAM=Ext.encode(n),this.dialogParamsVisible=!1},getParam:function(n,e,t,a){var o=this;this.paramOptions.splice(0,this.paramOptions.length),Ext.Ajax.request({url:"/billSvc/getSelectData",jsonData:{handle:window.UserHandle,relSource:n,query:e,condition:t,tableIndex:a},method:"POST",async:!1,timeout:9e7,success:function(n){var e=Ext.decode(n.responseText),t=!0,a=!1,s=void 0;try{for(var r,i=l()(e.GetSelectDataResult);!(t=(r=i.next()).done);t=!0){var c=r.value,d=c.Id,u=c.Id+","+c.Name;o.paramOptions.push({value:d,label:u})}}catch(n){a=!0,s=n}finally{try{!t&&i.return&&i.return()}finally{if(a)throw s}}o.dialogParamsVisible=!0,console.log(o.paramOptions)}})},setParamForm:function(){var n=this,e=this.formdata.PROGID;""!==e?Ext.Ajax.request({url:"/billSvc/getEntryParam",jsonData:{handle:window.UserHandle,progId:e},method:"POST",async:!1,timeout:9e7,success:function(e){var a=Ext.decode(e.responseText);if(""!==a.GetEntryParamResult){var l=Ext.decode(a.GetEntryParamResult),s=l[0].RelSource.split("'");n.paramInfo.DisplayText=l[0].DisplayText,n.paramInfo.Name=l[0].Name,n.getParam(s[1],"","",l[0].TableIndex)}else t.i(o.Message)({message:"没有配置入口参数！",type:"warning"})}}):t.i(o.Message)({message:"请先选择功能！",type:"warning"})},clearParam:function(n){0===n&&(this.formdata.ENTRYPARAM="")},setFuncPublish:function(){var n=Ext.encode(this.formdata);Ext.Ajax.request({url:"/billSvc/setFuncPublish",jsonData:{funcInfoJson:n},method:"POST",async:!1,timeout:9e7,success:function(n){var e=Ext.decode(n.responseText),a=Ext.decode(e.SetFuncPublishResult);console.log(a),0===a?t.i(o.Message)({message:"发布成功",type:"success"}):1===a&&t.i(o.Message)({message:"已发布过相同功能",type:"warning"})}})},selectedChange:function(n){var e=this;Ext.Ajax.request({url:"/billSvc/checkFieldValue",jsonData:{handle:window.UserHandle,fields:"A.PROGNAME,A.BILLTYPE",relSource:"axp.FuncList",curPk:n,condition:"and A.CANMENU=1",tableIndex:0},method:"POST",async:!1,timeout:9e7,success:function(n){var t=Ext.decode(n.responseText),a=Ext.decode(t.CheckFieldValueResult);e.formdata.MENUITEM=a.PROGNAME,e.formdata.PROGNAME=a.PROGNAME,e.formdata.BILLTYPE=a.BILLTYPE}})},getSelectField:function(){var n=this;this.options.splice(0,this.options.length),Ext.Ajax.request({url:"/billSvc/getSelectData",jsonData:{handle:window.UserHandle,relSource:"axp.FuncList",query:"",condition:"and A.CANMENU=1",tableIndex:0},method:"POST",async:!1,timeout:9e7,success:function(e){var t=Ext.decode(e.responseText),a=!0,o=!1,s=void 0;try{for(var r,i=l()(t.GetSelectDataResult);!(a=(r=i.next()).done);a=!0){var c=r.value,d=c.Id,u=c.Id+","+c.Name;n.options.push({value:d,label:u})}}catch(n){o=!0,s=n}finally{try{!a&&i.return&&i.return()}finally{if(o)throw s}}}})}}}},656:function(n,e,t){e=n.exports=t(588)(!0),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"publish-push.vue",sourceRoot:""}])},657:function(n,e,t){e=n.exports=t(588)(!0),e.push([n.i,"\n.form-footer[data-v-3fdd0ed6] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.function-list-layout[data-v-3fdd0ed6] {\n  height: 100%;\n}\n.function-list-form-btn[data-v-3fdd0ed6] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  overflow: hidden;\n}\n\n","",{version:3,sources:["D:/TEMP/Vue/ax-jikon-adminlte/src/components/content/publish-push.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,UAAU;EACV,QAAQ;EACR,SAAS;CACV;AACD;EACE,aAAa;CACd;AACD;EACE,qBAAqB;EACrB,cAAc;EACd,wBAAwB;MACpB,oBAAoB;EACxB,iBAAiB;CAClB",file:"publish-push.vue",sourcesContent:["\n.form-footer[data-v-3fdd0ed6] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.function-list-layout[data-v-3fdd0ed6] {\n  height: 100%;\n}\n.function-list-form-btn[data-v-3fdd0ed6] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  overflow: hidden;\n}\n\n"],sourceRoot:""}])},675:function(n,e,t){var a=t(656);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(589)("45720ac3",a,!0)},676:function(n,e,t){var a=t(657);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(589)("7e0e45d9",a,!0)},699:function(n,e){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"function-list-form-btn"},[t("el-dialog",{attrs:{title:"入口参数设置",visible:n.dialogParamsVisible,"show-close":!1,size:"tiny"}},[t("el-form",{attrs:{model:n.formInline}},[t("el-form-item",{attrs:{label:n.paramInfo.DisplayText}},[t("el-select",{model:{value:n.selectEntryParam,callback:function(e){n.selectEntryParam=e},expression:"selectEntryParam"}},n._l(n.paramOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer form-footer",slot:"footer"},[t("el-button",{on:{click:function(e){n.dialogParamsVisible=!1}}},[n._v("取 消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:n.setParam}},[n._v("确 定")])],1)],1),n._v(" "),t("el-button",{on:{click:n.setParamForm}},[n._v("设置入口参数")]),n._v(" "),t("el-button",{on:{click:function(e){n.clearParam(0)}}},[n._v("清除入口参数")]),n._v(" "),t("el-button",{on:{click:n.setFuncPublish}},[n._v("确认发布")])],1),n._v(" "),t("el-form",{ref:"form",attrs:{"label-width":"80px"}},[t("el-form-item",{attrs:{label:"清单名称"}},[t("el-input",{model:{value:n.formdata.MENUITEM,callback:function(e){n.formdata.MENUITEM=e},expression:"formdata.MENUITEM"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"功能"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:n.selectedChange},model:{value:n.formdata.PROGID,callback:function(e){n.formdata.PROGID=e},expression:"formdata.PROGID"}},n._l(n.options,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"(功能名称)"}},[t("el-input",{attrs:{readonly:!0},model:{value:n.formdata.PROGNAME,callback:function(e){n.formdata.PROGNAME=e},expression:"formdata.PROGNAME"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"(功能类型)"}},[t("el-select",{attrs:{disabled:!0},model:{value:n.formdata.BILLTYPE,callback:function(e){n.formdata.BILLTYPE=e},expression:"formdata.BILLTYPE"}},n._l(n.billtype,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"(入口参数)"}},[t("el-input",{attrs:{readonly:!0},model:{value:n.formdata.ENTRYPARAM,callback:function(e){n.formdata.ENTRYPARAM=e},expression:"formdata.ENTRYPARAM"}})],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=3.f00a5a4015bfa0d13423.js.map