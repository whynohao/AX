webpackJsonp([7],{550:function(n,e,t){t(623);var l=t(226)(t(649),t(604),"data-v-57502b80",null);n.exports=l.exports},581:function(n,e,t){e=n.exports=t(547)(!0),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"publish-pull.vue",sourceRoot:""}])},604:function(n,e){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticStyle:{height:"100%"}},[t("div",[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:n.funcinfo,border:"","tooltip-effect":"dark"}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),n._v(" "),t("el-table-column",{attrs:{prop:"MenuItem",label:"清单名称",width:"150"}}),n._v(" "),t("el-table-column",{attrs:{prop:"ProgName",label:"功能名称",width:"150","show-overflow-tooltip":""}}),n._v(" "),t("el-table-column",{attrs:{prop:"ProgId",label:"功能标识",width:"200","show-overflow-tooltip":""}}),n._v(" "),t("el-table-column",{attrs:{width:"150",label:"功能类型"},scopedSlots:n._u([["default",function(e){return[t("el-select",{attrs:{disabled:!0},model:{value:e.row.BillType,callback:function(n){e.row.BillType=n},expression:"scope.row.BillType"}},n._l(n.billtype,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))]}]])}),n._v(" "),t("el-table-column",{attrs:{prop:"EntryParam",label:"入口参数",width:"120","show-overflow-tooltip":""}}),n._v(" "),t("el-table-column",{attrs:{prop:"PublishDate",label:"发布日期",width:"150","show-overflow-tooltip":""},scopedSlots:n._u([["default",function(e){return[t("el-icon",{attrs:{name:"time"}}),n._v(" "),t("span",{staticStyle:{"margin-left":"10px"}},[n._v(n._s(e.row.PublishDate))])]}]])}),n._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:n._u([["default",function(e){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){n.handleLoad(e.$index,e.row)}}},[n._v("加载")]),n._v(" "),t("el-dialog",{attrs:{title:"功能清单",visible:n.dialogTableVisible,"before-close":n.close}},[t("div",{staticStyle:{height:"350px",overflow:"auto"}},[t("el-tree",{ref:"functree",attrs:{data:n.treedata,props:n.defaultProps,"node-key":"id","highlight-current":!0,"render-content":n.renderContent,"expand-on-click-node":!1,accordion:""}})],1)]),n._v(" "),n.isAdmin?t("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){n.handleDelete(e.$index,e.row)}}},[n._v("删除")]):n._e()]}]])})],1)],1)])},staticRenderFns:[]}},623:function(n,e,t){var l=t(581);"string"==typeof l&&(l=[[n.i,l,""]]),l.locals&&(n.exports=l.locals);t(548)("6f122314",l,!0)},649:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=t(142),a=t.n(l),i=t(144);t.n(i);e.default={data:function(){return{isShow:!1,funcinfo:[],loadList:{},dialogTableVisible:!1,treedata:[],defaultProps:{children:"children",label:"MENUITEM"},billtype:[{value:0,label:"主数据"},{value:1,label:"单据"},{value:2,label:"数据维护功能"},{value:3,label:"自定义功能"},{value:4,label:"报表"},{value:5,label:"日报表"}],root:[],isAdmin:!1}},computed:{},mounted:function(){this.getFuncList(),this.checkAdmin()},methods:{checkAdmin:function(){var n=this;Ext.Ajax.request({url:"/billSvc/checkAdmin",jsonData:{handle:window.UserHandle},method:"POST",async:!1,success:function(e){var t=Ext.decode(e.responseText);n.isAdmin=t.CheckAdminResult},failure:function(){i.Message.error("用户句柄无效"),window.DesktopApp.router.push("/")}})},getMenuData:function(){var n=this;this.treedata.splice(0,this.treedata.length);var e;Ext.Ajax.request({url:"/fileTranSvc/loadMenuSetting",jsonData:{handle:window.UserHandle,setting:!0},method:"POST",async:!1,success:function(t){var l=Ext.decode(t.responseText),a=l.LoadMenuSettingResult;""!==a&&(e=Ext.decode(a),n.root=Ext.decode(a))},failure:function(){i.Message.error("载入失败！返回登录页！"),window.DesktopApp.router.push("/")}});var t=!0,l=!1,o=void 0;try{for(var s,r=a()(e.children);!(t=(s=r.next()).done);t=!0){var u=s.value;this.treedata.push(u)}}catch(n){l=!0,o=n}finally{try{!t&&r.return&&r.return()}finally{if(l)throw o}}},savaMenuData:function(){var n=this;delete this.root.children,this.root.children=this.treedata;var e=Ext.encode(this.root);Ext.Ajax.request({url:"fileTranSvc/saveMenuSetting",jsonData:{handle:window.UserHandle,menuData:e},method:"POST",success:function(e){t.i(i.Message)({message:"保存成功",type:"success"}),n.dialogTableVisible=!1},failure:function(e){i.Message.error("保存失败"),n.dialogTableVisible=!1}})},getFuncList:function(){var n=this;this.funcinfo.splice(0,this.funcinfo.length),Ext.Ajax.request({url:"/billSvc/getPublishFunc",method:"POST",async:!1,timeout:9e7,success:function(e){var t=Ext.decode(e.responseText),l=t.GetPublishFuncResult,i=!0,o=!1,s=void 0;try{for(var r,u=a()(l);!(i=(r=u.next()).done);i=!0){var c=r.value;n.funcinfo.push(c)}}catch(n){o=!0,s=n}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}}})},close:function(){this.dialogTableVisible=!1},handleLoad:function(n,e){this.getMenuData(),this.dialogTableVisible=!0,this.loadList=e},handleDelete:function(n,e){Ext.Ajax.request({url:"/billSvc/deleteFuncPublish",jsonData:{handle:window.UserHandle,ProgId:e.ProgId,EntryParam:e.EntryParam},method:"POST",async:!1,success:function(n){t.i(i.Message)({message:"刪除成功",type:"success"})},failure:function(){i.Message.error("用户句柄无效"),window.DesktopApp.router.push("/")}}),this.funcinfo.splice(n,1)},append:function(n,e){void 0!==e.children?(e.children.length>0&&e.children.push({id:Ax.utils.LibVclSystemUtils.newGuid(),MENUITEM:this.loadList.MenuItem,PROGID:this.loadList.ProgId,PROGNAME:this.loadList.ProgName,BILLTYPE:this.loadList.BillType,ENTRYPARAM:this.loadList.EntryParam,ISVISUAL:!1,CONDITION:""}),this.savaMenuData()):t.i(i.Message)({message:"该节点不能添加子节点",type:"warning"})},renderContent:function(n,e){var t=this,l=e.node,a=e.data,i=e.store;return n("span",null,[n("span",null,[n("span",null,[l.label])]),n("span",{style:"float: right; margin-right: 20px"},[n("el-button",{attrs:{icon:"plus",size:"mini"},on:{click:function(){return t.append(i,a)}}},[])])])}}}}});
//# sourceMappingURL=7.09d4858908559b0e2232.js.map