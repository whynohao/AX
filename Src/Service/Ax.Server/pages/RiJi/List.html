<!DOCTYPE html>
<html>
<head>
    <!--<meta charset="utf-8">-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!--<meta>-->
    <!--显示中文-->
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <title>时光|日记</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <script src="../../Scripts/extjs/ext-all.js"></script>
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../bower_components/font-awesome/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="../../bower_components/Ionicons/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="../../dist/css/skins/_all-skins.min.css">

    <script src="../../Scripts/ax/utils/comm/LibTool.js"></script>

</head>
<body class="hold-transition skin-blue sidebar-mini">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>看
                    <small>日记</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i>首页</a></li>
            <li><a href="#">时光影像</a></li>
            <li class="active">日记</li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <!-- The time line -->
                <ul id="timeline" class="timeline">
                    <li>
                        <i class="fa fa-clock-o bg-gray"></i>
                    </li>
                </ul>
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </section>
    <!-- /.content -->

    <!-- jQuery 3 -->
    <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap 3.3.7 -->
    <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="../../bower_components/fastclick/lib/fastclick.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../../dist/js/demo.js"></script>

    <script>

        var my = { progId: 'KanTime.RiJi', billType: 0 };

        Ax.utils.LibTool.GetBillListing(my.progId, "", function (ret) {

            var list = ret.Data;

            var html = "";
            var label = "<li class='time-label'> <span class='bg-red'>你的故事</span> </li>";
            var item = '                                                                                                      \
                        <li>                                                                                                          \
                            <i class="fa fa-envelope bg-blue"></i>                                                                    \
                                                                                                                                      \
                            <div class="timeline-item">                                                                               \
                                <span class="time"><i class="fa fa-clock-o"></i>{createtiem}</span>                                          \
                                                                                                                                      \
                                <h3 class="timeline-header"><a href="Info.html?id={id}">{title}</a></h3>                             \
                                                                                                                                      \
                                <div class="timeline-body">                                                                           \
                                   {content}                                                                                          \
                                </div>                                                                                                \
                                <div class="timeline-footer">                                                                         \
                                </div>                                                                                                \
                              </div>                                                                                                  \
                          </li>                                                                                                       \
                    ';

            for (var i = 0; i < list.length; i++) {
                html += label;

                var createTime = list[i].CreateTime.toString();
                if (createTime.length >= 14) {
                    var v = createTime;
                    list[i].CREATETIME = (v.substring(0, 4) + '-' + v.substring(4, 6) + '-' + v.substring(6, 8) + '\t' + v.substring(8, 10) + ':' + v.substring(10, 12) + ':' + v.substring(12, 14));
                }
                html += item.replace("{id}", list[i].Id).replace("{title}", list[i].Title).replace("{content}", list[i].Content).replace("{createtiem}", list[i].CreateTime);
            }
            $("#timeline").html(html);
        });

    </script>
</body>
</html>
